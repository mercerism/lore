<!DOCTYPE html>
<html>
  <head>
    <title>An Introduction to Lore</title>
    <style type="text/css">
      @font-face {
        font-family: TeXGyrePagella;
        src: url("fonts/tex-gyre-pagella.regular.otf") format("opentype");
      }

      body {
        font-family: TeXGyrePagella, serif;
        margin-left: auto;
        margin-right: auto;
        width: 40em;
      }
     
      pre, pre + code {
        margin-left: 2em;
        padding: 4px;
        border-left: 6px solid #E7E7E7;
      }

      pre {
        background-color: #F7F7F7;
        margin-bottom: 0px;
      }

      pre + code {
        background-color: #F7F7F7;
      }
    </style>
  </head>
  <body>
    <h1>An Introduction to Lore</h1>

    <p><b>Lore</b> is a new MarkDown-like markup syntax and
    toolchain. The authors were dissatisfied with other solutions and
    decided to make another one. These files are intended to teach you
    about Lore by example and to explain its design rationale. If you
    are viewing these files as HTML or PDF documents, you may want to
    view the "Lore source" that was used to produce them. The examples
    in the text are small and focus on demonstrating a single aspect
    of the <b>Lore Syntax</b>, but the source for this document will
    show you how a complete document was constructed using <b>Lore</b>. You
    can find it at <a href="https://github.com/mercerism/lore/blob/master/docs/00_introduction.lore">https://github.com/mercerism/lore/blob/master/docs/00_introduction.lore</a> .</p>
    
    <h2>1. The Very Basics</h2>

    <p><b>Lore</b> is a markup syntax, a toolchain and a set of assumptions
    about documents.  The syntax is probably the easiest part of Lore to
    understand, so let's talk about that first.  The <b>Lore Toolchain</b>
    includes command-line utilities that convert files formatted using the
    <b>Lore Syntax</b> into HTML, PDF or DocBook/XML files.  As an example, you
    would use the <code>lore2html</code> utility to convert the following
    fragment into HTML:</p>

    <pre>This is a simple example of a //Lore file//. It contains a few
sentences in a few paragraphs.  We hope you find the markup is
__intuitive__ and does not distract from typing content.
  
Paragraphs are just collections of characters, separated by two
"end of lines" -- that's a single Line-Feed on Unix-like systems
or a Carriage-Return / Line-Feed sequence on DOS / Windows-like
systems.
  
Virtually all markup in !!Lore!! is accomplished with digraphs :
two character sequences. This is so you can type regular
sentences without worrying if you're going to accidentally
trigger the formatter.</pre>

    <code><b>01_simple_example.lore</b></code>
  
    <p>To convert this to HTML, you would use the following command (assuming
    the name of this file is <code>01_simple_example.lore</code>.)</p>

    <pre>lore2html 01_simple_example.lore > 01_simple_example.html</pre>

    <p>And you should get the following HTML out:</p>

    <pre>&lt;!DOCTYPE html&gt;
&lt;html&gt;
  &lt;body&gt;
    &lt;p&gt;This is a simple example of a &lt;i&gt;Lore file&lt;/i&gt;.  It
    contains a few sentences in a few paragraphs.  We hope you
    find the markup is &lt;u&gt;intuitive&lt;/u&gt; and does not distract
    from typing content.&lt;/p&gt;

    &lt;p&gt;Paragraphs are just collections of characters, separated
    by two "end of lines" &amp;#8211; that's a single Line-Feed on
    Unix-like systems or a Carriage-Return / Line-Feed sequence
    on DOS / Windows-like systems.&lt;/p&gt;

    &lt;p&gt;Virtually all markup in &lt;b&gt;Lore&lt;/b&gt; is accomplished with
    digraphs : two character sequences. This is so you can type
    regular sentences without worrying if you're going to
    accidentally trigger the formatter.&lt;/p&gt;
  &lt;/body&gt;
&lt;/html&gt;</pre>
    
    <code><b>01_simple_example.html</b></code>

    <p>The actual output of the <code>lore2html</code> command may be slightly
    different.  In this example we indented the HTML elements and made the
    columns narrow to make it a little more readable.  But that's a simple
    example of using Lore from the command line.</p>

    <h3>Design Rationale</h3>

    <p>First, <b>why do we need a new markup language?</b> Why not use <a
    href="https://en.wikipedia.org/wiki/Markdown">Markdown</a> or <a
    href="https://en.wikipedia.org/wiki/Textile_(markup_language)">Textile</a>?
    Or any of the many, many other <a
    href="https://en.wikipedia.org/wiki/Lightweight_markup_language">
    lightweight markup languages</a>?</p>

    <p>We were working on a project and tried both MarkDown and Textile, but
    both "got in our way" for a particular task we were trying to accomplish.
    We were building tools to experiment with <a
    href="http://www.literateprogramming.com/index.html">Literate
    Programming</a> and discovered we too frequently triggered the MarkDown and
    Textile formatters.  After a brief attempt to add literate programming and
    templating support to MarkDown and Textile, we quickly determined it would
    be easier to start from scratch.  The <b>Lore</b> syntax was designed to
    explicitly support annotating blocks of text with arbitrary metadata and
    templating using <a href="http://mustache.github.io/">Mustache</a> and <a
    href="https://handlebarsjs.com/">Handlebars</a>.  We then realized creating
    a new syntax and a new toolchain would give us the opportunity to develop
    new tools using the very literate programming techniques we wished to
    investigate.</p>

    <p>Okay, <b>Is Lore a Research Project?</b> Well, yes and no. We want to add
    features to tools to support new experiments, but several of us use Lore on
    a daily basis for routine tasks. It's very likely the toolchain will add
    experimental features that are triggered via metadata annotations. But the
    fundamental syntax is stable and support for basic, non-experimental
    features will not change. We are also fans of reverse compatibility; changes
    in the Lore syntax that break existing, non-experimental functionality won't
    be added to Lore.</p>

    <p>Next, <b>why use digraphs for markup?</b> Mostly because people usually
    do not use them when typing English sentences.  We did not want to have to
    worry about accidentally triggering the formatter.</p>

    <p><b>Why did you pick the specfic digraphs you did?</b> The in-line
    formatting digraphs for bold, underline, italic and monospaced all have
    meaning.  The bold digraph is two exclamation points (!!); we figured bolded
    text indicated something "exciting."  What punctuation mark is more exciting
    that the exclamation point?  The italic digraph is two slashes (//); the
    slanted nature of the slashes are supposed to remind the user of the
    slanted, oblique nature of italic print.  The underscore digraph is two
    underbars (__) which hopefully remind the user of the underline that will
    go under the text.  And the double asterisk digraph (**) for inline
    monospaced type is to remind C-programmers of a pointer.  We use in-line
    monospace fonts for small code examples; it was obvious to us.</p>

    <p>The Lore syntax was intended to be easy for humans to consume.  When
    there was a difference between "easy for writers" or "easy for programmers,"
    we opted for "easy for writers."  But we believe the syntax is not
    <i>too</i> difficult for programmers to reason about.</p>

    <h3>Review</h3>

    <ol>
      
      <li><b>Lore</b> is a lightweight markup language for annotating simple
      text documents with arbitrary metadata and formatting markup.</li>
      
      <li>It was invented to support experiments in literate programming, but is
      useful in the same contexts that other lightweight markup languages
      are.</li>

      <li>The <i>Lore Toolchain</i> converts plain text files formatted using
      the <i>Lore Syntax</i> into HTML, <a
      href="https://en.wikipedia.org/wiki/XSL_Formatting_Objects">XSL Formatting
      Objects</a> or <a
      href="https://en.wikipedia.org/wiki/DocBook">DocBook/XML</a> files. Other
      tools like <a href="https://www.princexml.com/">PrinceXML</a>, <a
      href="https://weasyprint.org/">WeasyPrint</a> or <a
      href="https://xmlgraphics.apache.org/fop/">Apache FOP</a> can convert HTML
      or FO files into PDFs.</li>

      <li>A Lore file is an ordered collection of <i>blocks</i>.  Blocks are
      separated by two End-of-Line sequences (LF or CRLF.)</li>
        
      <li>Text decoration markup (bold, underline, monospace and italic) is
      triggered by enclosing text in digraphs: (!!) for bold, (//) for italic /
      oblique, (__) for underline and (**) for monospace.</li>
      
    </ol>

    <h2>2. Annotations, Metadata and Structural Directives</h2>

    <p>If you remember from the previous section, the <b>Lore</b> syntax was
    designed to make it simple to attach metadata to arbitrary blocks of
    text. Metadata can apply to the whole document, a single block or a small
    span of text. Common bits of document metadata include: a document's author,
    it's title, a canonical URL where it can be found on the web or a unique
    document ID.</p>

    <p>Here's an example of a Lore document with metadata attached:</p>

    <pre>::title
An Example Document with Metadata

::copy
Copyright (c) 2019 Meadhbh Hamrick, All Rights Reserved

::author
Meadhbh Hamrick &lt;meadhbh@example.com&gt;

::abstract
This document provides a simple example of a Lore document with
metadata.</pre>

    <code><b>02_document_with_metadata.lore</b></code>

    <p>There's no standard interpretation of most metadata; it depends on what
    the application processing the Lore file thinks it should do. By default,
    the <code>lore2html</code> utility will convert the document metadata blocks
    into paragraphs, styled with classes unique to the metadata tag.</p>

    <p>The key take-aways here are:</p>

    <ol>
      <li>metadata is signified using the "annotation" double-colon digraph (::)</li>
      <li>metadata "tags" preceed the blocks they annotate</li>
    </ol>

    <p>From a syntax point of view, document metadata is just one use of the
    annotation digraph (::). We also use "annotations" to highlight document
    structure and add plain links to documents. Annotations really are the
    "everything else" workhorse of Lore.</p>

    <p>Titles and Section headers automagically generate anchors (targets for
    links) when used with <code>lore2html</code>. The <code>::link</code> annotation
    inserts an "undecorated" link to a local or remote link target. <i>Undecorated</i> means
    the text of the link is the URL or local fragment name of the
    link. "Decorated" links use a different format that's described later.</p>

    <p>Here's another example:</p>

    <pre>::title
An Example Document with Multiple Sections

This is a document that has multiple sections.

::section
First Section

This is the first paragraph in the first section.

This is the second paragraph in the first section.

This is a link to a later section:
::link:#Sub-Section Two .

And this is a link to an external document:
::link:https://example.com/

::section
Second Section

This is the first paragraph in the second section.

::section
::level:1
Sub-Section One
  
This is the first paragraph in the first sub-section of
the second section.

::section
::level:1
Sub-Section Two
  
This is the first paragraph in the second sub-section of
the second section.</pre>

    <code><b>03_document_with_sections.lore</b></code>

    <p>If we processed this file with <code>lore2html</code>, we would get
    something like this:</p>

    <pre>&lt;!DOCTYPE html&gt;
&lt;html&gt;
  &lt;body&gt;
    &lt;a name="title"/&gt;
    &lt;h1&gt;An Example Document with Multiple Sections&lt;/h1&gt;

    &lt;p&gt;This is a document that has multiple sections.&lt;/p&gt;

    &lt;p&gt;This is a link to a later section:
    &lt;a href="#_1_1_sub_section_two"&gt;Sub-Section Two&lt;/a&gt; .&lt;/p&gt;

    &lt;p&gt;And this is a link to an external document:
    &lt;a href="https://example.com/"&gt;https://example.com/&lt;/a&gt; .
    &lt;/p&gt;

    &lt;a name="_0_first_section"/&gt;
    &lt;h2&gt;First Section&lt;/h2&gt;

    &lt;p&gt;This is the first paragraph in the first section.&lt;/p&gt;

    &lt;p&gt;This is the second paragraph in the first section.&lt;/p&gt;

    &lt;a name="_1_second_section"/&gt;
    &lt;h2&gt;Second Section&lt;/h2&gt;

    &lt;p&gt;This is the first paragraph in the second section.&lt;/p&gt;

    &lt;a name="_1_0_sub_section_one"&gt;
    &lt;h3&gt;Sub-Section One&lt;/h3&gt;

    &lt;p&gt;This is the first paragraph in the first sub-section of
    the second section.&lt;/p&gt;

    &lt;a name="_1_1_sub_section_two"&gt;
    &lt;h3&gt;Sub-Section Two&lt;/h3&gt;

    &lt;p&gt;This is the first paragraph in the second sub-section of
    the second section.&lt;/p&gt;
  &lt;/body&gt;
&lt;/html&gt;</pre>

    <code><b>03_document_with_sections.html</b></code>

    <h3>Design Rationale</h3>

    <p>Many of the documents we wrote contained only two levels; a top level
    with a title and possibly an abstract followed by several sections. We felt
    this is the use case that should be easy for content creators. We also felt
    that metadata <i>should</i> look like an annotation on data that was already
    going to be in the document. So rather than having a separate metadata tag
    for common metadata (think of HTML that has a TITLE element inside it's HEAD
    element) we thought we should just "promote" an existing section with a
    metadata annotation.</p>

    <p>The original version of Lore used different digraphs to identify metadata
    (like title, abstract, etc.) from structural annotations
    (like <code>::section</code> annotations.)  We found it was slightly
    confusing to the users who had to remember what was metadata and what was
    structural annotation. And the tools we wrote handled metadata and
    structural annotation identically during the first phase of parsing. So it
    may seem weird that we use the annotation digraph (::) for both metadata and
    structuring the document, but users said it was easier to not have to
    remember different digraphs and it made no difference to the complexity of
    the code we wrote.</p>

    <h3>Review</h3>

    <ol>
      <li>The <i>Annotation Digraph</i> (<code>::</code>) denotes metadata
      (like title, abstract, author, etc.) as well as structural components in a
      document (like heading level 1, level 2, etc.)</li>

      <li>You can also insert <i>undecorated</i> links using the annotation digraph.</li>
    </ol>

  </body>
</html>
